!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("virtual-table",[],t):"object"==typeof exports?exports["virtual-table"]=t():e["virtual-table"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(l){if(i[l])return i[l].exports;var r=i[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,l){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=1)}([function(e,t,i){"use strict";var l=i(9);t.a={name:"DynamicScroll",props:{scrollViewHeight:{type:Number,required:!0},list:{type:Array,required:!0},cellCacheNumber:{type:Number,default:3},cellHeight:{type:Number,default:0}},data:function(){return{scrollData:{scrollHeight:0,paddingTop:0,paddingBottom:0,displayCells:[]},manager:null,heightFixed:!0,t:void 0}},methods:{initScrollManager:function(){this.manager=new l.a({list:this.list,scrollViewHeight:this.scrollViewHeight,cellHeight:this.cellHeight,cellCacheNumber:this.cellCacheNumber,firstRenderNumber:10})},updateScrollRender:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.scrollData=this.manager.getRenderInfo(),this.$forceUpdate(),this.heightFixed||this.$nextTick(function(){e.manager.updateCellHeight(e.$refs.$cell.map(function(e){return e.getBoundingClientRect().height})),t&&(e.manager.updateScrollHeight(),e.scrollData=e.manager.getRenderInfo())})},onScroll:function(){var e=this;clearTimeout(this.t),this.t=setTimeout(function(){e.handleScroll(e.$refs.$scroll.scrollTop,!0)},300),this.handleScroll(this.$refs.$scroll.scrollTop)},handleScroll:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.manager.updateScroll(e),this.updateScrollRender(t)}},watch:{list:function(e){this.manager.updateList(e),this.handleScroll(this.$refs.$scroll.scrollTop,!0)},scrollViewHeight:function(e){this.manager.updateScrollViewHeight(e),this.handleScroll(this.$refs.$scroll.scrollTop,!0)}},mounted:function(){this.cellHeight||(this.heightFixed=!1),this.initScrollManager(),this.updateScrollRender(!0)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(2);t.default=l.a},function(e,t,i){"use strict";function l(e){i(3)}var r=i(0),s=i(10),n=i(8),a=l,o=n(r.a,s.a,!1,a,"data-v-98037e54",null);t.a=o.exports},function(e,t,i){var l=i(4);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);i(6)("a437f0b2",l,!0,{})},function(e,t,i){t=e.exports=i(5)(!1),t.push([e.i,".zx-virtual-table-list[data-v-98037e54]{position:relative;overflow-y:scroll}.zx-virtual-table-list-phantom[data-v-98037e54]{position:absolute;left:0;top:0;right:0;z-index:-1}.zx-virtual-table-list-content[data-v-98037e54]{position:absolute;left:0;right:0;top:0}",""])},function(e,t){function i(e,t){var i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var s=l(r);return[i].concat(r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"})).concat([s]).join("\n")}return[i].join("\n")}function l(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var l=i(t,e);return t[2]?"@media "+t[2]+"{"+l+"}":l}).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var l={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(l[s]=!0)}for(r=0;r<e.length;r++){var n=e[r];"number"==typeof n[0]&&l[n[0]]||(i&&!n[2]?n[2]=i:i&&(n[2]="("+n[2]+") and ("+i+")"),t.push(n))}},t}},function(e,t,i){function l(e){for(var t=0;t<e.length;t++){var i=e[t],l=c[i.id];if(l){l.refs++;for(var r=0;r<l.parts.length;r++)l.parts[r](i.parts[r]);for(;r<i.parts.length;r++)l.parts.push(s(i.parts[r]));l.parts.length>i.parts.length&&(l.parts.length=i.parts.length)}else{for(var n=[],r=0;r<i.parts.length;r++)n.push(s(i.parts[r]));c[i.id]={id:i.id,refs:1,parts:n}}}}function r(){var e=document.createElement("style");return e.type="text/css",u.appendChild(e),e}function s(e){var t,i,l=document.querySelector("style["+m+'~="'+e.id+'"]');if(l){if(p)return g;l.parentNode.removeChild(l)}if(C){var s=f++;l=d||(d=r()),t=n.bind(null,l,s,!1),i=n.bind(null,l,s,!0)}else l=r(),t=a.bind(null,l),i=function(){l.parentNode.removeChild(l)};return t(e),function(l){if(l){if(l.css===e.css&&l.media===e.media&&l.sourceMap===e.sourceMap)return;t(e=l)}else i()}}function n(e,t,i,l){var r=i?"":l.css;if(e.styleSheet)e.styleSheet.cssText=y(t,r);else{var s=document.createTextNode(r),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(s,n[t]):e.appendChild(s)}}function a(e,t){var i=t.css,l=t.media,r=t.sourceMap;if(l&&e.setAttribute("media",l),v.ssrId&&e.setAttribute(m,t.id),r&&(i+="\n/*# sourceURL="+r.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var h=i(7),c={},u=o&&(document.head||document.getElementsByTagName("head")[0]),d=null,f=0,p=!1,g=function(){},v=null,m="data-vue-ssr-id",C="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,i,r){p=i,v=r||{};var s=h(e,t);return l(s),function(t){for(var i=[],r=0;r<s.length;r++){var n=s[r],a=c[n.id];a.refs--,i.push(a)}t?(s=h(e,t),l(s)):s=[];for(var r=0;r<i.length;r++){var a=i[r];if(0===a.refs){for(var o=0;o<a.parts.length;o++)a.parts[o]();delete c[a.id]}}}};var y=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t){for(var i=[],l={},r=0;r<t.length;r++){var s=t[r],n=s[0],a=s[1],o=s[2],h=s[3],c={id:e+":"+r,css:a,media:o,sourceMap:h};l[n]?l[n].parts.push(c):i.push(l[n]={id:n,parts:[c]})}return i}},function(e,t){e.exports=function(e,t,i,l,r,s){var n,a=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(n=e,a=e.default);var h="function"==typeof a?a.options:a;t&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0),i&&(h.functional=!0),r&&(h._scopeId=r);var c;if(s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),l&&l.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},h._ssrRegister=c):l&&(c=l),c){var u=h.functional,d=u?h.render:h.beforeCreate;u?(h._injectStyles=c,h.render=function(e,t){return c.call(t),d(e,t)}):h.beforeCreate=d?[].concat(d,c):[c]}return{esModule:n,exports:a,options:h}}},function(e,t,i){"use strict";function l(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,i,l){return i&&e(t.prototype,i),l&&e(t,l),t}}(),n=function(){function e(t){var i=t.list,l=t.scrollViewHeight,s=t.cellHeight,n=t.cellCacheNumber,a=t.firstRenderNumber;r(this,e),this.scrollViewHeight=this.scrollHeight=l,this.cellHeight=s,this.heightFixed=!!s,this.cellCacheNumber=n||3,this.renderNumber=a||10,this.paddingTop=this.paddingBottom=0,this.heightCache=new Array(i?i.length:0).fill(this.cellHeight),this.list=i,this.displayCells=[],this.passedCells=0,this.currentCellsTotalHeight=0,this.initScroll()}return s(e,[{key:"initScroll",value:function(){this.heightFixed?(this.scrollHeight=this.list.length*this.cellHeight,this.renderNumber=Math.ceil(this.scrollViewHeight/this.cellHeight),this.displayCells=this.list.slice(0,this.renderNumber+2*this.cellCacheNumber),this.paddingBottom=this.scrollHeight-this.displayCells.length*this.cellHeight):this.displayCells=this.list.slice(0,this.renderNumber+2*this.cellCacheNumber)}},{key:"appendList",value:function(e){this.list=this.list.concat(e),this.heightCache=this.heightCache.concat(new Array(e?e.length:0).fill(this.cellHeight)),this.updateScrollHeight()}},{key:"updateList",value:function(e){if(this.heightFixed)this.list=e,this.heightCache=new Array(e?e.length:0).fill(this.cellHeight),this.scrollHeight=this.list.length*this.cellHeight;else{var t=this.list,i=this.heightCache;this.heightCache=new Array(e?e.length:0).fill(this.cellHeight),this.list=e;for(var l=0,r=0;l<e.length&&r<t.length;)e[l]===t[r]?(this.heightCache[l]=i[r],l++,r++):r++}}},{key:"updateScroll",value:function(e){var t=this;if(this.heightFixed)this.passedCells=Math.floor(e/this.cellHeight),this._adjustCells(),this.currentCellsTotalHeight=this.displayCells.length*this.cellHeight,this.paddingTop=this.passedCells*this.cellHeight;else{for(var i=0,l=0;l<this.heightCache.length&&!(e<=i);l++)this.passedCells=l,this.heightCache[l]||(this.heightCache[l]=this.cellHeight),i+=this.heightCache[l];this._adjustCells(),this.paddingTop=this.heightCache.reduce(function(e,i,l){return l<t.passedCells?i?e+i:e+t.cellHeight:e},0)}this.paddingBottom=this.scrollHeight-this.paddingTop-this.currentCellsTotalHeight,this.paddingBottom<0&&(this.paddingBottom=0)}},{key:"_adjustCells",value:function(){this.passedCells=this.passedCells>this.cellCacheNumber?this.passedCells-this.cellCacheNumber:0,this.displayCells=this.list.slice(this.passedCells,this.renderNumber+2*this.cellCacheNumber+this.passedCells)}},{key:"updateCellHeight",value:function(e){var t;this.heightFixed||(this.currentCellsTotalHeight=e.reduce(function(e,t){return e+t},0),this.cellHeight=Math.round(this.currentCellsTotalHeight/e.length),this.renderNumber=Math.ceil(this.scrollViewHeight/this.cellHeight),(t=this.heightCache).splice.apply(t,[this.passedCells,e.length].concat(l(e))))}},{key:"updateScrollHeight",value:function(){var e=this;this.scrollHeight=this.heightCache.reduce(function(t,i){return i?t+i:t+e.cellHeight},0),this.paddingBottom=this.scrollHeight-this.paddingTop-this.currentCellsTotalHeight,this.paddingBottom<0&&(this.paddingBottom=0)}},{key:"updateScrollViewHeight",value:function(e){this.scrollViewHeight=e,this.cellHeight&&(this.renderNumber=Math.ceil(this.scrollViewHeight/this.cellHeight))}},{key:"getRenderInfo",value:function(){return{scrollHeight:this.scrollHeight,paddingTop:this.paddingTop,paddingBottom:this.paddingBottom,displayCells:this.displayCells}}}]),e}();t.a=n},function(e,t,i){"use strict";var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"$scroll",staticClass:"zx-virtual-table-list",style:{height:this.scrollViewHeight+"px"},on:{"&scroll":function(t){return e.onScroll(t)}}},[e._t("before",null,{data:e.scrollData}),e._v(" "),i("div",{staticClass:"zx-virtual-table-list-phantom",style:{height:e.scrollData.scrollHeight+"px"}}),e._v(" "),i("div",{staticClass:"zx-virtual-table-list-content",style:{transform:"translateY("+e.scrollData.paddingTop+"px)"}},e._l(e.scrollData.displayCells,function(t){return i("div",{ref:"$cell",refInFor:!0},[e._t("cell",null,{cell:t})],2)}),0),e._v(" "),e._t("after",null,{data:e.scrollData})],2)},r=[],s={render:l,staticRenderFns:r};t.a=s}])});
//# sourceMappingURL=virtual-table.js.map